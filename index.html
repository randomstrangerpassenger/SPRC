<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ν¬νΈν΄λ¦¬μ¤ λ¦¬λ°Έλ°μ‹± κ³„μ‚°κΈ° (ν”λν‹°λ„η‰)</title>
    <meta name="description" content="ν¬νΈν΄λ¦¬μ¤ λ¦¬λ°Έλ°μ‹± κ³„μ‚°κΈ°λ¥Ό ν†µν•΄ λ©ν‘ λΉ„μ¨μ— λ§μ¶° ν¬μ μ „λµμ„ μµμ ν™”ν•μ„Έμ”.">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="darkModeToggle" class="btn dark-mode-toggle" aria-label="λ‹¤ν¬ λ¨λ“ μ „ν™">π™</button>
    <div class="container">
        <header class="header">
            <h1>π“ ν¬νΈν΄λ¦¬μ¤ λ¦¬λ°Έλ°μ‹± κ³„μ‚°κΈ°</h1>
            <p>λ©ν‘ λΉ„μ¨μ— λ§μ¶° ν¬νΈν΄λ¦¬μ¤λ¥Ό μ΅°μ •ν•λ” μµμ μ λ°©λ²•μ„ κ³„μ‚°ν•©λ‹λ‹¤.</p>
        </header>

        <main>
            <section class="card">
                <h2>π“ ν¬νΈν΄λ¦¬μ¤ κ΄€λ¦¬</h2>
                <div class="input-group">
                    <label for="portfolioSelector">ν„μ¬ ν¬νΈν΄λ¦¬μ¤:</label>
                    <select id="portfolioSelector" class="input-group__select"></select>
                </div>
                <div class="btn-controls">
                    <button id="newPortfolioBtn" class="btn btn--green">β• μƒλ΅ λ§λ“¤κΈ°</button>
                    <button id="renamePortfolioBtn" class="btn btn--blue">βοΈ μ΄λ¦„ λ³€κ²½</button>
                    <button id="deletePortfolioBtn" class="btn btn--orange">π—‘οΈ μ‚­μ </button>
                </div>
            </section>

            <section class="card">
                <h2>β™οΈ κ³„μ‚° λ¨λ“ μ„ νƒ</h2>
                <div class="mode-selector">
                    <label for="modeAdd"><input type="radio" name="mainMode" value="add" id="modeAdd" checked> β• μ¶”κ°€ λ§¤μ λ¨λ“</label>
                    <label for="modeSell"><input type="radio" name="mainMode" value="sell" id="modeSell"> β–οΈ λ§¤λ„ λ¦¬λ°Έλ°μ‹± λ¨λ“</label>
                </div>
            </section>

            <section class="card">
                <h2>π’Ό ν„μ¬ ν¬νΈν΄λ¦¬μ¤ μ„¤μ •</h2>
                <div class="btn-controls">
                    <button id="addNewStockBtn" class="btn btn--green">β• μƒ μΆ…λ© μ¶”κ°€</button>
                    <button id="resetDataBtn" class="btn btn--orange">π”„ μ΄κΈ°ν™”</button>
                    <button id="normalizeRatiosBtn" class="btn btn--blue">β–οΈ λΉ„μ¨ μλ™ λ§μ¶¤(100%)</button>
                    <button id="saveDataBtn" class="btn btn--blue">π’Ύ μ €μ¥</button>
                    <button id="loadDataBtn" class="btn btn--grey">π“‚ λ¶λ¬μ¤κΈ°</button>
                    <button id="exportDataBtn" class="btn btn--blue">π“¤ λ‚΄λ³΄λ‚΄κΈ° (JSON)</button>
                    <button id="importDataBtn" class="btn btn--grey">π“¥ κ°€μ Έμ¤κΈ° (JSON)</button>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;">
                </div>
                <div class="table-responsive">
                    <table id="portfolioTable">
                        <thead id="portfolioTableHead"></thead>
                        <tbody id="portfolioBody"></tbody>
                    </table>
                </div>
                <div id="ratioValidator" class="ratio-validator">
                    <strong>λ©ν‘ λΉ„μ¨ ν•©κ³„:</strong>
                    <span class="ratio-value" id="ratioSum">0%</span>
                </div>
            </section>

            <section id="addInvestmentCard" class="card">
                <h2>π’° μ¶”κ°€ ν¬μκΈ κ³„μ‚°</h2>
                <div class="mode-selector">
                    <label for="currencyKRW"><input type="radio" name="currencyMode" value="krw" id="currencyKRW" checked> μ›ν™”(KRW) κΈ°μ¤€</label>
                    <label for="currencyUSD"><input type="radio" name="currencyMode" value="usd" id="currencyUSD"> λ‹¬λ¬(USD) κΈ°μ¤€</label>
                </div>
                <div id="exchangeRateGroup" class="input-group hidden">
                    <label for="exchangeRate">ν™μ¨ (1 USD):</label>
                    <input type="number" id="exchangeRate" placeholder="μ: 1300" min="0.01" step="0.01" value="1300">
                </div>
                <div class="input-group">
                    <label for="additionalAmount">μ¶”κ°€ ν¬μ κΈμ•΅:</label>
                    <input type="number" id="additionalAmount" placeholder="μ: 1000000" min="0">
                    <span id="usdInputGroup" class="hidden" style="display: contents;">
                        <span style="margin: 0 10px;">λλ”</span>
                        <label for="additionalAmountUSD" class="hidden">USD</label>
                        <input type="number" id="additionalAmountUSD" placeholder="μ: 1000" min="0" step="0.01">
                        <span>USD</span>
                    </span>
                </div>
            </section>
            
            <button id="calculateBtn" class="btn" style="width: 100%; padding: 15px; font-size: 1.2rem; margin-bottom: 25px;">κ³„μ‚°ν•κΈ°</button>
            
            <section id="resultsSection" class="hidden" aria-live="polite"></section>
            <section id="sectorAnalysisSection" class="hidden"></section>
            <section id="chartSection" class="card hidden">
                <h2>π“ ν¬νΈν΄λ¦¬μ¤ μ‹κ°ν™”</h2>
                <div>
                    <canvas id="portfolioChart"></canvas>
                </div>
            </section>
        </main>
    </div>

    <div id="transactionModal" class="modal-overlay hidden">
        <div class="modal-content card">
            <div class="modal-header">
                <h2 id="modalStockName">κ±°λ λ‚΄μ—­ κ΄€λ¦¬</h2>
                <button id="closeModalBtn" class="modal-close-btn" aria-label="λ‹«κΈ°">&times;</button>
            </div>
            
            <div class="table-responsive" style="margin-bottom: 20px;">
                <table id="transactionTable">
                    <caption>κ±°λ λ‚΄μ—­ λ©λ΅</caption>
                    <thead>
                        <tr>
                            <th>λ‚ μ§</th><th>μΆ…λ¥</th><th>μλ‰</th><th>λ‹¨κ°€</th><th>μ΄μ•΅</th><th>μ‘μ—…</th>
                        </tr>
                    </thead>
                    <tbody id="transactionListBody"></tbody>
                </table>
            </div>

            <form id="newTransactionForm">
                <h3>μƒ κ±°λ μ¶”κ°€</h3>
                <div class="mode-selector" style="margin-bottom: 15px;">
                    <label><input type="radio" name="txType" value="buy" checked> λ§¤μ</label>
                    <label><input type="radio" name="txType" value="sell"> λ§¤λ„</label>
                </div>
                <div class="input-grid">
                    <div class="input-group-vertical">
                        <label for="txDate">λ‚ μ§</label>
                        <input type="date" id="txDate" required>
                    </div>
                    <div class="input-group-vertical">
                        <label for="txQuantity">μλ‰</label>
                        <input type="number" id="txQuantity" placeholder="μ: 10" min="0" step="any" required>
                    </div>
                    <div class="input-group-vertical">
                        <label for="txPrice">λ‹¨κ°€</label>
                        <input type="number" id="txPrice" placeholder="μ: 150000" min="0" step="any" required>
                    </div>
                </div>
                <button type="submit" class="btn btn--blue" style="width: 100%; margin-top: 15px;">π’Ύ κ±°λ μ¶”κ°€</button>
            </form>
        </div>
    </div>

    <script type="module" src="/js/main.js"></script>
</body>
</html>