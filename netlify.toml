# netlify.toml (새 파일)

[build]
  # 1. Netlify가 실행할 '빌드' 명령
  #    이것이 CI/CD의 핵심입니다.
  #    - npx playwright install --with-deps: Netlify 빌드 서버에 Playwright 브라우저와 리눅스 종속성 설치
  #    - npm run test: Vitest 단위 테스트 실행
  #    - npm run test:e2e: Playwright E2E 테스트 실행
  #    - npm run build: 모든 테스트 통과 시 Vite 빌드 실행
  #    (참고: npm run test:e2e가 실패하면 '&&' 때문에 npm run build는 실행되지 않고 배포가 중단됩니다.)
  command = "npx playwright install --with-deps && npm run test && npm run test:e2e && npm run build"

  # 2. 빌드 결과물(정적 파일)이 있는 폴더
  publish = "dist"

  # 3. 서버리스 함수(api 폴더)가 있는 폴더
  functions = "api"

[build.environment]
  # Playwright가 Vite 개발 서버를 시작할 때 필요한 환경 변수
  # (이 키의 '값'은 3단계에서 Netlify 대시보드에 설정합니다)
  FINNHUB_API_KEY = "FINNHUB_API_KEY"